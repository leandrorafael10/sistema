<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      >
    <f:view>
        <ui:composition template="/principal/templategreen.xhtml">
            <ui:define name="principal-interna">
                <h:form id="formReceitasFiltro">
                    <p:tabView>
                        <p:tab id="tab1" title="Parcelas">
                            <h:panelGrid columns="2" id="gridFiltroreceita">
                                <p:fieldset legend="Filtro">

                                    <h:panelGrid columns="4" cellspacing="10">
                                        <sec:ifAnyGranted roles="ROLE_ADMINISTRACAO,ROLE_RH">
                                            <h:outputText value="Centro de custo: "/>

                                            <p:selectOneMenu converter="ccustoConverter" value="#{receitaBean.receitaFiltro.IDCCusto}">
                                                <f:selectItem itemLabel=""/>
                                                <f:selectItems var="receitaCentro"
                                                               value="#{ccustoBean.ccustos}"
                                                               itemLabel="#{receitaCentro.descricao}"
                                                               itemValue="#{receitaCentro}"/>
                                            </p:selectOneMenu> 
                                            <h:outputText value="Plano de Contas: "/>
                                            <p:selectOneMenu converter="classificacaoConverter" value="#{receitaBean.receitaFiltro.IDClassificacao}">
                                                <f:selectItem itemLabel=""/>
                                                <f:selectItems var="receitaClassificacao"
                                                               value="#{classificacaoBean.classificacaos}"
                                                               itemLabel="#{receitaClassificacao.descricao}"
                                                               itemValue="#{receitaClassificacao}"/>
                                            </p:selectOneMenu>
                                            <h:outputText value="Conta:"/>
                                            <p:selectOneMenu converter="contaConverter" value="#{receitaBean.receitaFiltro.IDConta}"  >
                                                <f:selectItem itemLabel=""/>
                                                <f:selectItems var="conta"
                                                               value="#{contaRN.listar()}"
                                                               itemLabel="#{conta.titular} / Banco : #{conta.IDBanco.descricao}"
                                                               itemValue="#{conta}"/>
                                            </p:selectOneMenu>
                                        </sec:ifAnyGranted>
                                        <h:outputText value="Cliente: "/>
                                        <p:selectOneMenu converter="clienteConverter" filter="true" value="#{receitaBean.cliente}">
                                           <f:selectItem itemLabel=""/>
                                            <f:selectItems value="#{clienteRN.listar()}"
                                                           var="cliente"
                                                           itemLabel="#{cliente.IDPessoa.razao}"
                                                           itemValue="#{cliente}"/>
                                        </p:selectOneMenu>
                                    </h:panelGrid>

                                    <h:panelGrid columns="6" cellpadding="10">

                                        <h:outputText value="Venc. de : "/>
                                        <p:calendar  value="#{receitaBean.receitaFiltro.DTVencimento}" size="8" pattern="dd/MM/yyyy"/>
                                        <h:outputText value=" até: "/>
                                        <p:calendar size="8"
                                                    value="#{receitaBean.fimFiltroVenc}"
                                                    pattern="dd/MM/yyyy"/>
                                        <p:selectOneRadio value="#{receitaBean.pgFiltro}" >  
                                            <f:selectItem itemLabel="todos" itemValue="0"/>  
                                            <f:selectItem itemLabel="pago" itemValue="1"/>  
                                            <f:selectItem itemLabel="pagar" itemValue="2"/>  
                                        </p:selectOneRadio> 
                                    </h:panelGrid>
                                    <h:panelGrid columns="4" cellpadding="10">
                                        <h:outputText value="valor de: R$"/>
                                        <p:inputText value="#{receitaBean.valorIni}" size="15">
                                            <f:convertNumber  minFractionDigits="2"/>
                                        </p:inputText>
                                        <h:outputText value="a:"/>
                                        <p:inputText value="#{receitaBean.valorFim}" size="15">
                                            <f:convertNumber  minFractionDigits="2"/>
                                        </p:inputText>
                                    </h:panelGrid>
                                </p:fieldset>
                            </h:panelGrid>
                            <p:commandButton value="filtrar" actionListener="#{receitaBean.filtroReceita()}" update="tabelaReceitas,gridFiltroreceita" onstart="statusDialog.show();" onsuccess="statusDialog.hide();" />
                            <p:commandButton value="incluir" action="/tesouraria/lancamento_financeiro/receita_receber.xhtml" onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>
                            <br/>
                            <p:separator/>
                            <br/>
                            <p:growl life="30000"/>
                            <p:messages/>
                            <p:panel>
                                <p:dataTable value="#{receitaBean.receitaDataModelo}"
                                             id="tabelaReceitas"
                                             var="receitaDataModelo" 
                                             scrollable="true" scrollHeight="400" 
                                             selection="#{receitaBean.selectReceitas}"
                                             emptyMessage="Sem registros"
                                             resizableColumns="true">
                                    <f:facet name="header">
                                        Todas receitas
                                    </f:facet>
                                    <p:column selectionMode="multiple"   disabledSelection="#{receitaDataModelo.atzPg!=0}" width="50"/> 
                                    <p:column headerText="Venc. "  disabledSelection="#{receitaDataModelo.atzPg!=0}" >
                                        <h:outputText value="#{receitaDataModelo.DTVencimento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Entidade" disabledSelection="#{receitaDataModelo.atzPg!=0}"> 
                                        <h:outputText value="#{receitaDataModelo.IDCliente.IDPessoa.razao}" rendered="#{receitaDataModelo.IDCliente!=null}"/>
                                        <h:outputText value="#{receitaDataModelo.IDFuncionario.IDPessoa.razao}" rendered="#{receitaDataModelo.IDFuncionario!=null}"/>
                                        <h:outputText value="#{receitaDataModelo.IDFornecedor.IDPessoa.fantasia!=null? receitaDataModelo.IDFornecedor.IDPessoa.fantasia : receitaDataModelo.IDFornecedor.IDPessoa.razao}" rendered="#{receitaDataModelo.IDFornecedor!=null}"/>
                                        <h:outputText value="sem entidade" rendered="#{receitaDataModelo.IDCliente== null and receitaDataModelo.IDFuncionario==null and receitaDataModelo.IDFornecedor==null}"/>
                                    </p:column>

                                    <p:column headerText=" Vlr.nominal"  disabledSelection="#{receitaDataModelo.atzPg!=0}">

                                        <h:outputText value="R$ "/>
                                        <h:outputText value="#{receitaDataModelo.valorNominal}">
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Tipo"  disabledSelection="#{receitaDataModelo.atzPg!=0}">
                                        <h:outputText value="#{receitaDataModelo.IDClassificacao.descricao}"/>
                                    </p:column>
                                    <p:column headerText="Forma pag."  disabledSelection="#{receitaDataModelo.atzPg!=0}">
                                        <h:outputText value="#{receitaDataModelo.idorigem.IDContratoMidia.IDtipopagamento.descricao}"/>
                                    </p:column>
                                    <p:column >
                                        <p:commandLink update=":formReceitasFiltro" oncomplete="varDialogReceita.show()" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                            <h:graphicImage library="imagens" name="Pesq.png"  title="visualizar"/>
                                            <f:setPropertyActionListener  value="#{receitaDataModelo}" target="#{receitaBean.receitaPesquisa}"  />
                                        </p:commandLink>
                                    </p:column>
                                    
                                    <p:column  disabledSelection="#{receitaDataModelo.atzPg!=0}">
                                        <p:commandLink update=":formEditReceita"  oncomplete="varDialogReceitaEdit.show()" disabled="#{receitaDataModelo.atzPg!=0}" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                            <h:graphicImage library="imagens" name="Edit-Yes-32.png" title="editar" />
                                            <f:setPropertyActionListener value="#{receitaDataModelo}" target="#{receitaBean.receitaEdit}" />
                                        </p:commandLink>
                                    </p:column>
                                    <p:column disabledSelection="#{receitaDataModelo.atzPg!=0}" >
                                        <p:commandLink update=":forDelReceita" oncomplete="varDialogReceitaDel.show()" immediate="true" disabled="#{receitaDataModelo.atzPg!=0}" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                            <h:graphicImage library="imagens" name="Delete-32.png" title="excluir"/>
                                            <f:setPropertyActionListener value="#{receitaDataModelo}" target="#{receitaBean.receitaDel}"/>
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="status" disabledSelection="#{receitaDataModelo.atzPg!=0}" >
                                        <h:outputLabel value="ativo" rendered="#{receitaDataModelo.atzPg==0}"/>
                                        <h:outputLabel value="boleto" rendered="#{receitaDataModelo.atzPg==1}"/>
                                        <h:outputLabel value="boleto emitido" rendered="#{receitaDataModelo.atzPg==2}"/>
                                        <h:outputLabel value="pago" rendered="#{receitaDataModelo.atzPg==3}"/>
                                    </p:column>
                                </p:dataTable>
                                <p:commandLink actionListener="#{receitaBean.autorizaPagamento(event)}" update=":formReceitasFiltro" title="selecionar receitas" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                    <p:graphicImage library="imagens" name="Dir.png"/>
                                    <br/>
                                    <h:outputText value="selecionar"/>
                                </p:commandLink>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Emição de boletos" >
                            <p:panel id="painelLiberacao">
                                <p:messages/>
                                <p:dataTable 
                                    value="#{receitaRN.liberaPagamento()}" 
                                    var="receitaModeloLib" 
                                    scrollable="true" scrollHeight="400" 
                                    selection="#{receitaBean.selectReceitasLibera}"
                                    emptyMessage="Sem registros"
                                    >
                                    <f:facet name="header">
                                        Todas despesas
                                    </f:facet>

                                    <p:column selectionMode="multiple" style="width:2%" /> 

                                    <p:column headerText="Vencimento " width="80">
                                        <h:outputText value="#{receitaModeloLib.DTVencimento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Entidade" width="180"> 
                                        <h:outputText value="#{receitaModeloLib.IDCliente.IDPessoa.razao}" rendered="#{receitaModeloLib.IDCliente!=null}"/>
                                        <h:outputText value="#{receitaModeloLib.IDFuncionario.IDPessoa.razao}" rendered="#{receitaModeloLib.IDFuncionario!=null}"/>
                                        <h:outputText value="#{receitaModeloLib.IDFornecedor.IDPessoa.fantasia}" rendered="#{receitaModeloLib.IDFornecedor!=null}"/>
                                        <h:outputText value="sem entidade" rendered="#{receitaModeloLib.IDCliente== null and receitaModeloLib.IDFuncionario==null and receitaModeloLib.IDFornecedor==null}"/>
                                    </p:column>
                                    <p:column headerText=" Valor nominal" width="100">
                                        <h:outputText value="R$ "/>
                                        <h:outputText value="#{receitaModeloLib.valorNominal}">
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Tipo" width="100">
                                        <h:outputText value="#{receitaModeloLib.IDClassificacao.descricao}"/>
                                    </p:column>
                                    <p:column headerText="num.doc" width="90">
                                        <h:outputText value="#{receitaModeloLib.numero}"/>
                                    </p:column>

                                </p:dataTable>
                                <p:separator/>
                                <h:panelGrid cellspacing="15" columns="6">

                                    <p:commandLink  actionListener="#{receitaBean.estornoPagamento}"  update=":formReceitasFiltro">
                                        <p:graphicImage library="imagens" name="Esq.png"/>
                                        <br/>
                                        <h:outputText value="estornar"/>
                                    </p:commandLink>&nbsp;&nbsp;&nbsp;
                                    <p:commandLink  actionListener="#{receitaBean.liberaPagamento(event)}"  update=":formReceitasFiltro" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                        <p:graphicImage library="imagens" name="Dir.png"/>
                                        <br/>
                                        <h:outputText value="liberar"/>
                                    </p:commandLink>&nbsp;&nbsp;&nbsp;

                                    <h:commandLink  action="#{receitaBean.geraRelatorioPDF}" 
                                                    target="_blank" >
                                        <p:graphicImage library="imagens" name="pdf.png"/>
                                        <br/>
                                        <h:outputText value="pdf"/>
                                    </h:commandLink>
                                </h:panelGrid>

                                <br/>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Aguardando confirmação de pagamento" >
                            <p:panel id="painelAutorizados">
                                <p:dataTable 
                                    value="#{receitaRN.faseDePagamento()}" 
                                    var="receitaModeloLiberado" 
                                    scrollable="true" scrollHeight="400" 
                                    selection="#{receitaBean.selectReceitasLiberados}"
                                    emptyMessage="Sem registros"
                                    >
                                    <f:facet name="header">
                                        Todas receitas
                                    </f:facet>

                                    <p:column selectionMode="multiple" style="width:2%"  disabledSelection="#{receitaModeloLiberado.pago==true}" /> 

                                    <p:column headerText="Vencimento " width="80">
                                        <h:outputText value="#{receitaModeloLiberado.DTVencimento}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Entidade" width="180"> 
                                        <h:outputText value="#{receitaModeloLiberado.IDCliente.IDPessoa.razao}" rendered="#{receitaModeloLiberado.IDCliente!=null}"/>
                                        <h:outputText value="#{receitaModeloLiberado.IDFuncionario.IDPessoa.razao}" rendered="#{receitaModeloLiberado.IDFuncionario!=null}"/>
                                        <h:outputText value="#{receitaModeloLiberado.IDFornecedor.IDPessoa.fantasia}" rendered="#{receitaModeloLiberado.IDFornecedor!=null}"/>
                                        <h:outputText value="sem entidade" rendered="#{receitaModeloLiberado.IDCliente== null and receitaModeloLiberado.IDFuncionario==null and receitaModeloLiberado.IDFornecedor==null}"/>
                                    </p:column>
                                    <p:column headerText=" Valor nominal" width="100">
                                        <h:outputText value="R$ "/>
                                        <h:outputText value="#{receitaModeloLiberado.valorNominal}">
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>


                                    <p:column headerText="Tipo" width="100">
                                        <h:outputText value="#{receitaModeloLiberado.IDClassificacao.descricao}"/>
                                    </p:column>
                                    <p:column headerText="num.doc" width="90">
                                        <h:outputText value="#{receitaModeloLiberado.numero}"/>
                                    </p:column>

                                </p:dataTable>
                                <p:separator/>
                                <p:commandLink  actionListener="#{receitaBean.estornoLiberacaoPagamento(event)}"  update="painelAutorizados,tabelaReceitas" onstart="statusDialog.show();" onsuccess="statusDialog.hide();">
                                    <p:graphicImage library="imagens" name="Esq.png"/>
                                    <br/>
                                    <h:outputText value="estornar"/>
                                </p:commandLink>
                            </p:panel>
                        </p:tab>

                    </p:tabView>
                    <p:dialog widgetVar="varDialogReceita" modal="true">
                        <h:panelGrid columns="2">
                            <h:outputText value="Data emissão: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTEmissao}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputText value="Tipo Doc.: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDDocumento.descricao}"/>
                            <h:outputText value="Numero: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.numero}"/>
                            <h:outputText value="Cedente: " rendered="#{receitaBean.receitaPesquisa.IDCliente!=null or receitaBean.receitaPesquisa.IDFuncionario!=null or receitaBean.receitaPesquisa.IDFornecedor!=null}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDCliente.IDPessoa.razao}" rendered="#{receitaBean.receitaPesquisa.IDCliente!=null}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDFuncionario.IDPessoa.razao}" rendered="#{receitaBean.receitaPesquisa.IDFuncionario!=null}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDFornecedor.IDPessoa.razao}" rendered="#{receitaBean.receitaPesquisa.IDFornecedor!=null}"/>
                            <h:outputText value="Atividade Fin.: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDAtividade.descricao}"/>
                            <h:outputText value="Centro Custo: " />
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDCCusto.descricao}"/>
                            <h:outputText value="Plano de Conta: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.IDClassificacao.descricao}"/>
                            <h:outputText value="Forma pagamento:"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.idorigem.IDContratoMidia.IDtipopagamento.descricao}"/>
                            <h:outputText value="Vencimento: "/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTVencimento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGrid>
                        <h:panelGrid columns="5">
                            <h:outputText value="Multa: R$" rendered="#{receitaBean.receitaPesquisa.valorMulta!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.valorMulta}" rendered="#{receitaBean.receitaPesquisa.valorMulta !='0.00'}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </h:outputText>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTMulta==null?'':'limite '}"  rendered="#{receitaBean.receitaPesquisa.valorMulta!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTMulta}" rendered="#{receitaBean.receitaPesquisa.DTMulta!=null and receitaBean.receitaPesquisa.valorMulta!='0.00'}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputText value="" rendered="#{receitaBean.receitaPesquisa.DTMulta==null?true:false}" />
                            <h:outputText value="#{receitaBean.receitaPesquisa.isentoMulta?'isento':''}" style="color: blue"/>
                        </h:panelGrid>
                        <h:panelGrid columns="4">
                            <h:outputText value="Juros: R$" rendered="#{receitaBean.receitaPesquisa.valorJuros!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.valorJuros}" rendered="#{receitaBean.receitaPesquisa.valorJuros!='0.00'}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </h:outputText>
                            <h:outputText value="#{receitaBean.receitaPesquisa.tipoJuros?'dia':'mês'}" rendered="#{receitaBean.receitaPesquisa.valorJuros!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.isentoJuros?'isento':''}" style="color: blue" rendered="#{receitaBean.receitaPesquisa.valorJuros!='0.00'}"/>

                            <h:outputText value="Desconto: R$" rendered="#{receitaBean.receitaPesquisa.valorDesconto!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.valorDesconto}" rendered="#{receitaBean.receitaPesquisa.valorDesconto!='0.00'}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </h:outputText>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTDesconto==null?'':'limite '}" rendered="#{receitaBean.receitaPesquisa.valorDesconto!='0.00'}"/>
                            <h:outputText value="#{receitaBean.receitaPesquisa.DTDesconto}" rendered="#{receitaBean.receitaPesquisa.DTDesconto!=null and receitaBean.receitaPesquisa.valorDesconto!='0.00'}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputText value="" rendered="#{receitaBean.receitaPesquisa.DTDesconto==null?true:false}" />
                        </h:panelGrid>
                        <br/>
                        <h:outputText value="Valor liquido: "/>
                        <h:outputText value="#{receitaBean.receitaPesquisa.valorLiquido}" styleClass="azul">
                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                        </h:outputText>
                        <br/>
                        <h:outputText value="Valor nominal: "/>
                        <h:outputText value="#{receitaBean.receitaPesquisa.valorNominal}" styleClass="azul">
                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                        </h:outputText>

                    </p:dialog>


                </h:form>
                <h:form id="forDelReceita">
                    <p:dialog widgetVar="varDialogReceitaDel" modal="true" header="excluir registro">
                        <h:panelGrid columns="2" id="gridDel">
                            <h:outputText value="Data emissão: "/>
                            <h:outputText value="#{receitaBean.receitaDel.DTEmissao}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                            <h:outputText value="Tipo Doc.: "/>
                            <h:outputText value="#{receitaBean.receitaDel.IDDocumento.descricao}"/>
                            <h:outputText value="Numero: "/>
                            <h:outputText value="#{receitaBean.receitaDel.numero}"/>
                            <h:outputText value="Cedente: " rendered="#{receitaBean.receitaDel.IDCliente!=null or receitaBean.receitaDel.IDFuncionario!=null or receitaBean.receitaDel.IDFornecedor!=null}"/>
                            <h:outputText value="#{receitaBean.receitaDel.IDCliente.IDPessoa.razao}" rendered="#{receitaBean.receitaDel.IDCliente!=null}"/>
                            <h:outputText value="#{receitaBean.receitaDel.IDFuncionario.IDPessoa.razao}" rendered="#{receitaBean.receitaDel.IDFuncionario!=null}"/>
                            <h:outputText value="#{receitaBean.receitaDel.IDFornecedor.IDPessoa.razao}" rendered="#{receitaBean.receitaDel.IDFornecedor!=null}"/>
                            <h:outputText value="Atividade Fin.: "/>
                            <h:outputText value="#{receitaBean.receitaDel.IDAtividade.descricao}"/>
                            <h:outputText value="Centro Custo: " />
                            <h:outputText value="#{receitaBean.receitaDel.IDCCusto.descricao}"/>
                            <h:outputText value="Plano de Conta: "/>
                            <h:outputText value="#{receitaBean.receitaDel.IDClassificacao.descricao}"/>
                            <h:outputText value="Vencimento: "/>
                            <h:outputText value="#{receitaBean.receitaDel.DTVencimento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGrid>
                        <p:commandButton value="confirmar" actionListener="#{receitaBean.excluir(event)}" update=":formReceitasFiltro" oncomplete="varDialogReceitaDel.hide()" onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>
                    </p:dialog>
                </h:form>
                <h:form id="forPagarReceita">
                    <p:dialog widgetVar="varDialogReceitaPagar" modal="true" header="Dados da despesa">
                        <p:panel id="panelConfirPagCredito">
                            <p:messages/>
                            <h:panelGrid columns="2">

                                <h:outputText value="Data emissão: "/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTEmissao}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                <h:outputText value="Tipo Doc.: "/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDDocumento.descricao}"/>
                                <h:outputText value="Numero: " rendered="#{receitaBean.receitacredito.IDReceita.numero!=1}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.numero}" rendered="#{receitaBean.receitacredito.IDReceita.numero!=1}"/>
                                <h:outputText value="Cedente: " rendered="#{receitaBean.receitacredito.IDReceita.IDCliente!=null or receitaBean.receitacredito.IDReceita.IDFuncionario!=null or receitaBean.receitacredito.IDReceita.IDFornecedor!=null}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDCliente.IDPessoa.razao}" rendered="#{receitaBean.receitacredito.IDReceita.IDCliente!=null}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDFuncionario.IDPessoa.razao}" rendered="#{receitaBean.receitacredito.IDReceita.IDFuncionario!=null}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDFornecedor.IDPessoa.razao}" rendered="#{receitaBean.receitacredito.IDReceita.IDFornecedor!=null}"/>
                                <h:outputText value="Atividade Fin.: "/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDAtividade.descricao}"/>
                                <h:outputText value="Centro Custo: " />
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDCCusto.descricao}"/>
                                <h:outputText value="Plano de Conta: "/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.IDClassificacao.descricao}"/>
                                <h:outputText value="Forma pagamento:"/>
                                <h:outputText value="#{receitaBean.receitaPesquisa.idorigem.IDContratoMidia.IDtipopagamento.descricao}"/>
                                <h:outputText value="Vencimento: "/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTVencimento}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </h:panelGrid>
                            <h:panelGrid columns="5">
                                <h:outputText value="Multa: R$" rendered="#{receitaBean.receitacredito.IDReceita.valorMulta!='0.00'}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.valorMulta}" rendered="#{receitaBean.receitacredito.IDReceita.valorMulta !='0.00'}">
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputText>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTMulta==null?'':'limite '}" rendered="#{receitaBean.receitacredito.IDReceita.valorMulta!='0.00'}" />
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTMulta}" rendered="#{receitaBean.receitacredito.IDReceita.DTMulta!=null and receitaBean.receitacredito.IDReceita.valorMulta!='0.00'}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                <h:outputText value="" rendered="#{receitaBean.receitacredito.IDReceita.DTMulta==null?true:false}" />
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.isentoMulta?'isento':''}" style="color: blue"/>
                            </h:panelGrid>
                            <h:panelGrid columns="4">
                                <h:outputText value="Juros: R$" rendered="#{receitaBean.receitacredito.IDReceita.valorJuros!='0.00'}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.valorJuros}" rendered="#{receitaBean.receitacredito.IDReceita.valorJuros!='0.00'}">
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputText>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.tipoJuros?'dia':'mês'}" rendered="#{receitaBean.receitacredito.IDReceita.valorJuros!='0.00'}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.isentoJuros?'isento':''}" style="color: blue" rendered="#{receitaBean.receitacredito.IDReceita.valorJuros!='0.00'}"/>

                                <h:outputText value="Desconto: R$" rendered="#{receitaBean.receitacredito.IDReceita.valorDesconto!='0.00'}"/>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.valorDesconto}" rendered="#{receitaBean.receitacredito.IDReceita.valorDesconto!='0.00'}">
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputText>
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTDesconto==null?'':'limite '}" rendered="#{receitaBean.receitacredito.IDReceita.valorDesconto!='0.00'}" />
                                <h:outputText value="#{receitaBean.receitacredito.IDReceita.DTDesconto}" rendered="#{receitaBean.receitacredito.IDReceita.DTDesconto!=null and receitaBean.receitacredito.IDReceita.valorDesconto!='0.00'}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                <h:outputText value="" rendered="#{receitaBean.receitacredito.IDReceita.DTDesconto==null?true:false}" />
                            </h:panelGrid>
                            <br/>
                            <h:outputText value="valor liquido: "/>
                            <h:outputText value="#{receitaBean.receitacredito.IDReceita.valorLiquido}" styleClass="azul">
                                <f:convertNumber minFractionDigits="2"/>
                            </h:outputText>
                            <br/>
                            <h:outputText value="Valor nominal: "/>
                            <h:outputText value="#{receitaBean.receitacredito.IDReceita.valorNominal}" styleClass="azul">
                                <f:convertNumber minFractionDigits="2"/>
                            </h:outputText>
                            <p:separator/>
                            <h:outputText value="valor a pagar : "/>
                            <p:inputText value="#{receitaBean.valorPago}" size="8" required="true"  requiredMessage="valor líquido e obrigatório!">
                                <f:convertNumber maxFractionDigits="2"/>
                            </p:inputText>
                            <h:panelGrid columns="2" id="gridNumeroDoc">

                                <h:outputText value="Tipo documento : "/>
                                <p:selectOneMenu converter="documentoConverter" value="#{receitaBean.receitacredito.IDCredito.IDTpDocumento}" required="true" requiredMessage="tipo de documento e obrigatório!">
                                    <f:selectItem itemLabel=""/>
                                    <f:selectItems value="#{documentoBean.documentos}"
                                                   var="doc"
                                                   itemLabel="#{doc.descricao}"
                                                   itemValue="#{doc}"/>
                                    <p:ajax update="gridNumeroDoc"/>
                                </p:selectOneMenu>
                                <h:outputText value="numero doc : " rendered="#{receitaBean.receitacredito.IDCredito.IDTpDocumento.IDDocumento!=2?true:false}"/>
                                <p:inputText  value="#{receitaBean.receitacredito.IDCredito.numero}" rendered="#{receitaBean.receitacredito.IDCredito.IDTpDocumento.IDDocumento!=2?true:false}" required="true" requiredMessage="numero documento é obrigatório!"/>
                            </h:panelGrid>
                            <p:separator/>
                            <h:panelGrid columns="2">
                                <h:outputText value="Conta : "/>
                                <p:selectOneMenu converter="contaConverter" value="#{receitaBean.receitacredito.IDCredito.IDConta}" required="true" requiredMessage="conta e obrigatório!">
                                    <f:selectItem itemLabel=""/>
                                    <f:selectItems var="conta"
                                                   value="#{contaBean.contas}"
                                                   itemLabel="#{conta.titular} / Banco : #{conta.IDBanco.descricao}"
                                                   itemValue="#{conta}"/>
                                </p:selectOneMenu>
                                <h:outputText value="obs. : "/>
                                <p:inputTextarea value="#{receitaBean.receitacredito.IDCredito.obs}" rows="2" cols="60"/>
                            </h:panelGrid>
                            <p:separator/>
                            <p:commandButton value="confirmar" actionListener="#{receitaBean.pagandoReceita}" update=":forPagarReceita:panelConfirPagCredito" onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>
                            <p:commandButton value="sair" onclick="varDialogReceitaPagar.hide();" onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>
                        </p:panel>
                    </p:dialog>

                </h:form>
                <h:form id="formEditReceita">
                    <p:dialog widgetVar="varDialogReceitaEdit" modal="true" header="alteração de registro">
                        <p:panel id="panelEdicao" >
                            <p:messages/>
                            <h:panelGrid columns="4"  cellpadding="10">
                                <h:outputText value="Tipo de documento: "/>
                                <p:selectOneMenu converter="documentoConverter" value="#{receitaBean.receitaEdit.IDDocumento}" required="true" requiredMessage="tipo de dodumento e obrigatorio">
                                    <f:selectItem itemLabel="" itemValue=""/>
                                    <f:selectItems var="documento"
                                                   value="#{documentoBean.documentos}"
                                                   itemLabel="#{documento.descricao}"
                                                   itemValue="#{documento}"/>
                                </p:selectOneMenu>
                                <h:outputText value="numero: "/>
                                <p:inputText  value="#{receitaBean.receitaEdit.numero}"   size="30" maxlength="30"/>

                                <h:outputText value="vencimento: "/>
                                <p:calendar value="#{receitaBean.receitaEdit.DTVencimento}"
                                            pattern="dd/MM/yyyy"
                                            size="14"
                                            showOn="button"
                                            required="true"
                                            requiredMessage="Data vencimento e obrigatorio"
                                            />
                                <h:outputText value="Forma pagamento:"/>
                                <p:selectOneMenu converter="tipoPagamentoConverter" value="#{receitaBean.receitaEdit.idorigem.IDContratoMidia.IDtipopagamento}">
                                    <f:selectItems value="#{tipoPagamentoRN.listar()}"
                                                   var="tipo"
                                                   itemLabel="#{tipo.descricao}"
                                                   itemValue="#{tipo}"/>
                                </p:selectOneMenu>
                                <p:inplace  label="editar cedente" styleClass="azul">

                                    <h:panelGrid  columns="3" cellpadding="10">
                                        <h:outputText value="cedente: "/>
                                        <p:selectOneMenu  value="#{receitaBean.opsCedente}" style="width:100px">
                                            <f:selectItem itemLabel="nenhum" itemValue="0"/>
                                            <f:selectItem itemLabel="funcionário" itemValue="1"/>
                                            <f:selectItem itemLabel="cliente" itemValue="2"/>
                                            <f:selectItem itemLabel="fornecedor" itemValue="3"/>
                                            <p:ajax  listener="#{receitaBean.opcaoCedente()}" update="gridCedente1"/>
                                        </p:selectOneMenu>
                                        <h:panelGrid id="gridCedente1" columns="4">
                                            <h:outputLabel  value="Funcionário: " rendered="#{receitaBean.opcFuncionario}"/>
                                            <h:outputLabel  value="Cliente: " rendered="#{receitaBean.opsCliente}"/>
                                            <p:selectOneMenu  converter="funcionarioConverter" value="#{receitaBean.receitaEdit.IDFuncionario}" rendered="#{receitaBean.opcFuncionario}">
                                                <f:selectItem itemLabel="" itemValue="#{null}"/>
                                                <f:selectItems var="funcionario"
                                                               value="#{funcionarioBean.funcionarios}"
                                                               itemLabel="#{funcionario.IDPessoa.razao}"
                                                               itemValue="#{funcionario}"
                                                               />
                                            </p:selectOneMenu>

                                            <p:selectOneMenu  converter="clienteConverter" value="#{receitaBean.receitaEdit.IDCliente}" rendered="#{receitaBean.opsCliente}" required="true">
                                                <f:selectItems var="cliente"
                                                               value="#{clienteBean.clientes}"
                                                               itemLabel="#{cliente.IDPessoa.razao}"
                                                               itemValue="#{cliente}"/>
                                            </p:selectOneMenu>
                                            <p:selectOneMenu  converter="fornecedorConverter" filter="true" value="#{receitaBean.receitaEdit.IDCliente}" rendered="#{despesaBean.opsFornecedor}" >
                                                <f:selectItems value="#{fornecedorBean.fornecedores}"
                                                               var="forn1"
                                                               itemLabel="#{forn1.IDPessoa.razao}"
                                                               itemValue="#{forn1}"/>
                                            </p:selectOneMenu>
                                        </h:panelGrid>

                                    </h:panelGrid>
                                </p:inplace>
                            </h:panelGrid>



                            <p:panel>
                                <h:panelGrid columns="2" cellpadding="20">
                                    <p:panel>
                                        <h:panelGrid columns="7">
                                            <h:outputText value="Multa:"/>
                                            <p:selectOneMenu style="width: 50px"  value="#{receitaBean.tipoMulta}">
                                                <f:selectItem itemLabel="%" itemValue="#{true}"/>
                                                <f:selectItem itemLabel="R$" itemValue="#{false}"/>
                                            </p:selectOneMenu>

                                            <p:inputText size="6"  value="#{receitaBean.receitaEdit.valorMulta}"  maxlength="10"   requiredMessage="valor da multa obrigatório!">
                                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                            </p:inputText>

                                            <h:outputText value="limite"/>
                                            <p:calendar value="#{receitaBean.receitaEdit.DTMulta}"
                                                        showOn="button" 
                                                        pattern="dd/MM/yyyy"
                                                        size="8"/>
                                            <p:selectBooleanCheckbox value="#{receitaBean.receitaEdit.isentoMulta}"/>
                                            <h:outputText value="isento"/>
                                        </h:panelGrid>

                                        <p:separator/>

                                        <h:panelGrid columns="6">
                                            <h:outputText value="Juros: "/>
                                            <p:inputText size="2"  value="#{receitaBean.receitaEdit.valorJuros}" maxlength="10"  requiredMessage="valor juros obrigatório!">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </p:inputText>
                                            <h:outputText value="%"/>
                                            <p:selectOneMenu style="width: 85px"  value="#{receitaBean.receitaEdit.tipoJuros}" >
                                                <f:selectItem itemLabel="dia" itemValue="#{false}"/>
                                                <f:selectItem itemLabel="mês" itemValue="#{true}"/>
                                            </p:selectOneMenu>

                                            <p:selectBooleanCheckbox value="#{receitaBean.receitaEdit.isentoJuros}"/> 

                                            <h:outputText value="isento"/>
                                        </h:panelGrid>

                                        <p:separator/>

                                        <h:panelGrid columns="5">
                                            <h:outputText value="Desconto:"/>
                                            <p:selectOneMenu style="width: 50px" value="#{receitaBean.tipoDesconto}">
                                                <f:selectItem itemLabel="%" itemValue="#{true}"/>
                                                <f:selectItem itemLabel="R$" itemValue="#{false}"/>
                                            </p:selectOneMenu>
                                            <p:inputText size="6" value="#{receitaBean.receitaEdit.valorDesconto}" maxlength="10"  requiredMessage="valor desconto obrigatório!">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </p:inputText>
                                            <h:outputText value="limite"/>
                                            <p:calendar value="#{receitaBean.receitaEdit.DTDesconto}"
                                                        showOn="button" 
                                                        pattern="dd/MM/yyyy"
                                                        size="8"/>
                                        </h:panelGrid>    
                                    </p:panel>
                                    <p:panelGrid columns="2">
                                        <h:outputText value="valor nominal: R$"/>
                                        <p:inputText value="#{receitaBean.receitaEdit.valorNominal}" size="8"  requiredMessage="valor líquido e obrigatório!" required="true">
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                        </p:inputText>
                                        <h:outputText value="valor liquido: R$"/>
                                        <p:inputText value="#{receitaBean.receitaEdit.valorLiquido}" size="8"  requiredMessage="valor líquido e obrigatório!" required="true">
                                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                        </p:inputText>
                                    </p:panelGrid>
                                </h:panelGrid>
                            </p:panel>
                            <br/>
                            <p:commandButton value="alterar" actionListener="#{receitaBean.atualizar}" update="panelEdicao,:formReceitasFiltro" onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>
                        </p:panel>
                    </p:dialog>
                </h:form>
                


            </ui:define>
        </ui:composition>
    </f:view>
</html>
